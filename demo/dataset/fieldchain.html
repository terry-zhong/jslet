<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Jslet - Field Chain</title>
    <link rel="stylesheet" type="text/css" href="../css/demo-style.css" />
    <script type="text/javascript" src="../../loader/jslet.loader.js"></script>
    <script type="text/javascript">
        jslet.define("employee", "../js/employee.js");
        jslet.require("jslet,employee");
     </script>
</head>
<body onunload="jslet.ui.uninstall()">
    <h2 id="top">Jslet - Field Chain</h2>
<!--[if lt IE 8]>
<p class="chromeframe">Jslet framework only supports IE 8+. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
	<div class="content">Use field chain to get value, sort data, filter data or find data.</div>
    <fieldset>
		<legend>Employee List (<a href="../model/EmployeeDataModel.htm">Data Model</a>)</legend>
		<table style="width:100%">
			<tr>
				<td style="width:70%">
					<p>
						Employee List:</p>
					<div data-jslet='type:"DBTable",dataset:"employee"' style="width: 100%; height: 200px">
					</div>
				</td>
				<td>
					<p>
						Department List:</p>
					<div data-jslet='type:"DBTable",dataset:"department"' style="width: 100%; height: 200px">
					</div>
				</td>
			</tr>
		</table>
    </fieldset>
    <h3>Demo Content:</h3>
	<div class="content">
		<ol>
		<li>Get Field Value:<br />
		   Get the address of a department(field:<b>department.address</b>)
			<button onclick="doGetValue()"> Get Value </button>&nbsp;<input id="result1" size="20"/>
		</li>
		<li>Find first employee with expression which contains field chain: <br />
		Find employee by condition: "department in Beijing"(expr:<b>[department.address]=='Beijing'</b>)
		<button onclick="doFindData()"> Search </button>
		</li>
		<li>Filter data with expression that contains field chain: <br />
			Filter out all employee whose department is in Beijing(expr:<b>[department.address]=='Beijing'</b>):
			   <button onclick="doFilterData();"> Filter </button>&nbsp;<button onclick="dsEmployee.filtered(false);"> Display All </button>
		</li>
		<li>Sort with field chain: <br />
			Sort with department.address(<b>Asceding</b>):<button onclick="doSortDataAsce();"> Sort </button><br />
			Sort by department.address(<b>Descending</b>):<button onclick="doSortDataDesc();"> Sort </button>
		</li>
		</ol>
	</div>
	<script type="text/javascript">
		function doGetValue() {
			$('#result1').val(dsEmployee.getFieldValue('department.address'));
		}
		
		function doFindData() {
			dsEmployee.find("[department.address]=='Beijing'");
		}
		
		function doFilterData() {
			dsEmployee.filter("[department.address]=='Beijing'");
			dsEmployee.filtered(true)
		}
		
		//Sort with department.address(Asceding)
		function doSortDataAsce() {
			dsEmployee.indexFields("department.address");
		}
		
		//Sort by department.address(Descending)
		function doSortDataDesc() {
			dsEmployee.indexFields("department.address desc");
		}
	</script>
	<!-- Source Code -->
	<script type="text/javascript" src="../source/demosource.js?height=430"></script>
</body>
</html>
