<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Jslet - DBChart Demo2</title>
    <link rel="stylesheet" type="text/css" href="../../css/demo-style.css" />
    <script type="text/javascript" src="../../../loader/jslet.loader.js"></script>
    <script type="text/javascript">
        //jslet is the system defined module name
        jslet.require("jslet", function () {
            initialize();
        });

        function initialize() {
    		jslet.ui.onReady = function() {
    			jslet('#chartId').renderAll() 
    		}		
            //Create dataset for chart
            dsSummary = new jslet.data.Dataset("summary");

            var f = jslet.data.createStringField("area", 10);
            f.label("Area");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month1", 16, 2);
            f.label("Jan.").displayFormat("#,##0.00");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month2", 16, 2);
            f.label("Feb.").displayFormat("#,##0.00");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month3", 16, 2);
            f.label("Mar.").displayFormat("#,##0.00");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month4", 16, 2);
            f.label("Apr.").displayFormat("#,##0.00");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month5", 16, 2);
            f.label("May").displayFormat("#,##0.00");
            dsSummary.addField(f);

            f = jslet.data.createNumberField("month6", 16, 2);
            f.label("Jun.").displayFormat("#,##0.00");
            dsSummary.addField(f);

            var dataList = new Array();
            var rec;
            for (var i = 1; i <= 4; i++) {
                rec = new Object();
                rec.area = 'Area' + i;
                for (var j = 1; j <= 6; j++) {
                    rec['month' + j] = Math.round(Math.random() * 10000);
                }
                dataList.push(rec);
            }
            dsSummary.dataList(dataList);
        }

        function setValueFields() {
            var arr = new Array();
            if ($('#optMonth1')[0].selected)
                arr.push("month1");
            if ($('#optMonth2')[0].selected)
                arr.push("month2");
            if ($('#optMonth3')[0].selected)
                arr.push("month3");
            if ($('#optMonth4')[0].selected)
                arr.push("month4");
            if ($('#optMonth5')[0].selected)
                arr.push("month5");
            if ($('#optMonth6')[0].selected)
                arr.push("month6");
            jslet("#chartId").valueField = arr.join(',');
            jslet("#chartId").renderAll();

        }

        function setChartType() {
            jslet('#chartId').chartType($('#idType').val());
            $('#selValueField')[0].multiple = ($('#idType')[0].value != "pie");
            jslet('#chartId').renderAll();
        }

        function doTableRowSelect() {
            setTimeout(function() {
				if(jslet('#chartId').onlySelected())
					jslet('#chartId').renderAll();
			}, 200);
        }
		
		function setOnlySelected(selected) {
			jslet('#chartId').onlySelected(selected);
			jslet('#chartId').renderAll();		
		}
    </script>
</head>
<body onunload="jslet.ui.uninstall()">
    <h2 id="top">Jslet - DBChart Demo2</h2>
<!--[if lt IE 8]>
<p class="chromeframe">Jslet framework only supports IE 8+. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
    <div class="content">Tips: DBChart is designed with Flash. Cause the .swf file size is 514k, it is probably slow when open it first time.</div>
    <fieldset>
		<legend>Summary List</legend>
    <div id="table1" data-jslet='type:"DBTable",dataset:"summary",hasSelectCol:true,onSelect:doTableRowSelect,onSelectAll:doTableRowSelect,onRowClick:doTableRowSelect'
        style="width: 950px; height: 130px">
    </div>
	</fieldset>
	
	<fieldset>
		<legend>Chart Area</legend>
    <table>
        <tr>
            <td style="vertical-align:top">
                <p>Chart Options:</p>
				<ol>
                <li>Chart Type: <select id="idType" onchange="setChartType();">
                        <option value="column">Column Chart</option>
                        <option value="bar">Bar Chart</option>
                        <option value="line">Line Chart</option>
                        <option value="area">Area Chart</option>
                        <option value="pie">Pie Chart</option>
                    </select></li>
                <li><input type="radio" value="V1" name="onlySelected" checked="checked" onclick="setOnlySelected(false);" />Draw chart with all records &nbsp;&nbsp;&nbsp;
                    <input type="radio" name="onlySelected" onclick="setOnlySelected(true);" />Draw chart with selected record</li>
                <li>Value Field: 
					<select id="selValueField" multiple="multiple" size="6" onclick="setTimeout('setValueFields()',200)">
                        <option id="optMonth1" value="month1" selected="selected">Jan.</option>
                        <option id="optMonth2" value="month2" selected="selected">Feb.</option>
                        <option id="optMonth3" value="month3" selected="selected">Mar.</option>
                        <option id="optMonth4" value="month4" selected="selected">Apr.</option>
                        <option id="optMonth5" value="month5" selected="selected">May.</option>
                        <option id="optMonth6" value="month6" selected="selected">Jun.</option>
                    </select>You can check multiple options in all chart type but pie chart.</li>
                <p>
				</ol>
                    &nbsp;&nbsp;&nbsp;<button onclick="jslet('#chartId').renderAll()" >  Draw Chart </button>
					
            </td>
            <td>
                <div id="chartId" data-jslet='type:"dbchart",chartType:"column",categoryFields:"area",valueField:"month1,month2,month3,month4,month5,month6", dataset:"summary"'
                    style="width: 600px; height: 500px">
                </div>
            </td>
        </tr>
    </table>
	</fieldset>
	<!-- Source Code -->
	<script type="text/javascript" src="../../source/demosource.js?height=630"></script>
</body>
</html>
